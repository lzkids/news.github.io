<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="不要过分强调选择什么语言.选择一种语言,这将有助于你学习编程,并完成你的任务,😊 不要担心什么很酷或最新的东西适合你.不管怎样,你以后还是会学习新的语言.">
    <title>唯獨少了個字 - 我爱我的生活,希望一切安好</title>
    
      <link rel="icon" href="/img/favicon.ico">
    
    <meta name="keyword"  content="">
    
<link rel="stylesheet" href="/css/style.css">

    
      
<link rel="stylesheet" href="/css/helpers.css">
    
    
  
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  


<meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="唯獨少了個字" type="application/atom+xml">
</head>


<body>
  <div class="loading-wrapper" data-loading="true">
    <div class="loading">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
  <div class="page" data-filter="true">
    <div class="head" data-show="true">
      <header class="head-header">
  <div class="head-author">
    <a href="/" class="head-author-link">
      唯獨少了個字</a>
    </div>
  <div class="head-right">
    <!-- <div class="head-search">
      <input class="head-searchK"></input>
      <span class="head-searchT">
        Search</span>
    </div> -->
    <button class="bar-wrap" id="bar-wrap-toggle">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
    <div class="head-about" id="head-about">
      
      <a class="head-about-link" href="/about">
        关于</a>
      
    </div>
  </div>
</header>

    </div>
    <div class="main">
      

<div class="menu-bar-head" id="menu-bar" data-show="false">
  <ul class="menu-bar-ul">
    
      
      <li class="menu-bar-item ">
          
              <a href="/categories/Posts/">
          
              <span>Posts1</span>
            </a>
      </li>
    
      
      <li class="menu-bar-item ">
          
              <a href="/categories/Posts2/">
          
              <span>Posts2</span>
            </a>
      </li>
    
      
      <li class="menu-bar-item  border ">
          
            <a href="/archives">
          
              <span>Archives</span>
            </a>
      </li>
    
      
      <li class="menu-bar-item ">
          
            <a href="/tags">
          
              <span>Tags</span>
            </a>
      </li>
    
    
      <li class="menu-bar-item">
        <a href="/about">
          <span>关于</span>
        </a>
      </li>
    
  </ul>
</div>
      <article class="post" id="post">
  <header class="post-head">
    <h1 class="post-title">
      <a class="title" href="/33565/">
        HTTP重定向
      </a>
    </h1>
  </header>
  <div class="post-datetag">
    <div class="post-date">
      <time class="post-time" title="2020-08-30 22:14:56" datetime="2020-08-30T14:14:56.000Z" itemprop="datePublished">
  2020-08-30</time>
    </div>
    |
    <div class="post-tag">
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/http/" rel="tag">http</a></li></ul>

    </div>
    |
    
  

    <div class="post-visit">
      <span id="busuanzi_container_page_pv">
        <span id="busuanzi_value_page_pv"></span>
        hits
      </span>
    </div>

  


  </div>

  
    <div class="post-word-count">
      

本文共2357字。

    </div>
  

  
    <div class="post-cc">
      Copyright: 
      
        署名-非商业性使用-相同方式共享 | <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/2.5/cn/">CC BY-NC-SA 2.5 CN</a>
      
    </div>
  

  


  <div class="article-entry" itemprop="articleBody">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>One of the most common and largely overlooked vulnerabilities by web developers is Open Redirect (also known as “Unvalidated Redirects and Forwards”).</p>
<blockquote>
<p>其中一个最常见的，也是大部分被网站开发者忽视的漏洞是开放重定向（也称为 “无效重定向和转发”）。</p>
</blockquote>
<p>A website is vulnerable to Open Redirect when parameter values (the portion of URL after “?”) in an HTTP GET request allow for information that will redirect a user to a new website without any validation of the target of redirect.<span id="more"></span></p>
<blockquote>
<p>当HTTP GET请求中的参数值（"? "后的部分URL）允许提供信息，将用户重定向到一个新的网站，而不对重定向的目标进行任何验证时，网站就会受到Open Redirect的攻击。</p>
</blockquote>
<p>Depending on the architecture of a vulnerable website, redirection could happen after certain action, such as login, and sometimes it could happen instantaneously upon loading of a page.</p>
<blockquote>
<p>根据易受攻击网站的架构，重定向可能会在某些操作后发生，如登录，有时也可能在页面加载时瞬间发生。</p>
</blockquote>
<p>An example of a vulnerable website link could look something like this: <a target="_blank" rel="noopener" href="https://www.example.com/login.html?RelayState=http%3A%2F%2Fexample.com%2Fnext">https://www.example.com/login.html?RelayState=http%3A%2F%2Fexample.com%2Fnext</a></p>
<blockquote>
<p>一个脆弱的网站链接的例子可能是这样的：: <a target="_blank" rel="noopener" href="https://www.example.com/login.html?RelayState=http%3A%2F%2Fexample.com%2Fnext">https://www.example.com/login.html?RelayState=http%3A%2F%2Fexample.com%2Fnext</a></p>
</blockquote>
<p>In this example, “RelayState” parameter indicates where to send user upon successful login (In our example it is “<a target="_blank" rel="noopener" href="http://example.com/next">http://example.com/next</a>”).If website doesn’t validate the “RelayState” parameter value to make sure that target web page is legitimate and intended, attacker  could manipulate that parameter to send a victim to a fake page crafted by attacker: <a target="_blank" rel="noopener" href="https://www.example.com/login.html?RelayState=http%3A%2F%2FEvilWebsite.com">https://www.example.com/login.html?RelayState=http%3A%2F%2FEvilWebsite.com</a></p>
<blockquote>
<p>在这个例子中，"RelayState "参数表示在用户成功登录后将用户发送到哪里（在我们的例子中是 “<a target="_blank" rel="noopener" href="http://example.com/next">http://example.com/next</a>”）。如果网站没有验证 "RelayState "参数的值，以确保目标网页是合法的，攻击者可以操纵该参数，将受害者发送到一个由攻击者制作的虚假页面：<a target="_blank" rel="noopener" href="https://www.example.com/login.html?RelayState=http%3A%2F%2FEvilWebsite.com%E3%80%82">https://www.example.com/login.html?RelayState=http%3A%2F%2FEvilWebsite.com。</a></p>
</blockquote>
<p>Open Redirect vulnerabilities don’t get enough attention from developers because they don’t directly damage website and do not allow an attacker to directly steal data that belong to the company. However, that doesn’t mean that Open Redirect attacks are not a threat. One of the main uses for this vulnerability is to make phishing attacks more credible and effective.</p>
<blockquote>
<p>开放式重定向漏洞没有引起开发者的足够重视，因为它们不会直接破坏网站，也不允许攻击者直接窃取数据，而这些数据是属于该公司。然而，这并不意味着Open Redirect攻击不构成威胁。这个漏洞的主要用途之一是使钓鱼攻击更加可信和有效。</p>
</blockquote>
<p>When an Open Redirect is used in a phishing attack, the victim receives an email that looks legitimate with a link that points to a correct and expected domain. What the victim may not notice, is that in a middle of a long URL there are parameters that manipulate and change where the link will take them.</p>
<blockquote>
<p>当开放重定向被用于网络钓鱼攻击时，受害者会收到一封看似合法的电子邮件，其中的链接指向一个正确的、预期的域名。受害者可能没有注意到的是，在长长的URL中间，有一些参数可以操纵和改变链接的位置。</p>
</blockquote>
<p>To make identification of the Open Redirect even more difficult, redirection could take place after victim provides login on a legitimate website first. Attackers have found that an effective way to trick a victim is to redirect him to a fake website after they enter their credentials on a legitimate page. The fake website would look identical to a legitimate website, and it would ask the victim to re-enter their password. After the victim re-enters their password it would be recorded by the attacker and victim would be redirected back to a valid website. If done correctly, victim would think that he mistyped password once and would not notice that his username and password were stolen.</p>
<blockquote>
<p>为了使识别开放重定向更加困难，重定向可能发生在受害者先提供登录合法网站之后。攻击者发现，欺骗受害者的有效方法是在受害者在合法网页上输入凭证后将其重定向到一个假网站。这个假网站看起来和合法网站一样，它会要求受害者重新输入密码。当受害者重新输入密码后，攻击者会记录下来，受害者会被重定向到一个有效的网站。如果操作得当，受害者会认为自己打错了一次密码，不会注意到自己的用户名和密码被盗。</p>
</blockquote>
<p>Phishing is used in most successful targeted hacks and also regularly in opportunistic attacks. Considering how prominent phishing is in our daily lives, Open Redirect vulnerabilities should not be dismissed.</p>
<blockquote>
<p>网络钓鱼被用于大多数成功的目标黑客，也经常用于机会主义攻击。考虑到网络钓鱼在我们的日常生活中是多么的突出，Open Redirect漏洞不应该被忽视。</p>
</blockquote>
<p>It would have been unfair to single out any specific website or company as being vulnerable to Open Redirect because so many companies have it. Instead, it’s more useful to demonstrate how common those websites are and how easy it is to find them.</p>
<blockquote>
<p>如果单独指出任何特定的网站或公司容易受到开放重定向的影响，这是不公平的，因为有这么多公司都有这种情况。相反，更有用的是展示这些网站有多普遍，以及找到它们有多容易。</p>
</blockquote>
<p>Doing a web search is one of the best tools to find Open Redirect on your own website and across a wider Internet.</p>
<blockquote>
<p>进行网络搜索是在自己的网站和更广泛的互联网上找到Open Redirect(开放重定向)的最佳工具之一。</p>
</blockquote>
<p>Google Search allows for a great flexibility in writing search queries, including queries that specifically search through URLs of pages.</p>
<blockquote>
<p>Google搜索可以非常灵活地编写搜索查询，包括专门通过网页的URL进行搜索的查询。</p>
</blockquote>
<p>The following operators and special symbols allow anyone to craft very targeted Google Searches for finding Open Redirects:</p>
<blockquote>
<p>以下操作符和特殊符号使任何人都可以针对特定的Google搜索，以查找开放重定向：</p>
</blockquote>
<p><strong>allinurl</strong> - operator that tells Google to search within URL for all provided keywords</p>
<p>Example: allinurl:ReturnUrl which searches for web pages that have “ReturnUrl” as part of their URL</p>
<blockquote>
<p>allinurl - 操作符，告诉谷歌在URL中搜索所有提供的关键字。</p>
<p>例如：allinurl:ReturnUrl，它可以搜索URL中含有 "ReturnUrl "的网页。</p>
</blockquote>
<p><strong>site</strong> - operator that tells to only return results that are on specific domain or a web site<br>
Example: site:example.com which searches for web pages from <a target="_blank" rel="noopener" href="http://example.com">example.com</a></p>
<blockquote>
<p>site - 操作符，指示只返回特定域名或网站上的结果。<br>
例如：site:example.com可以搜索example.com的网页。</p>
</blockquote>
<p><strong>""</strong> - double quotes are a special symbols that used to indicate to search for exact combination of words and symbols within quotes</p>
<blockquote>
<p>“”–双引号是一种特殊的符号，用来表示搜索引号内的单词和符号的精确组合。</p>
</blockquote>
<p>*- The asterisk is a wildcard that represents one or more words</p>
<blockquote>
<p>*- 星号是通配符，代表一个或多个词。</p>
</blockquote>
<p>Using these allows us to search for certain tell tale signs of potential Open Redirect:</p>
<p>We can look for the general presence of “http” or “https” within parameter area of GET request. For instance:</p>
<blockquote>
<p>使用这些可以让我们搜索某些潜在的开放重定向的迹象：</p>
<p>我们可以在GET请求的参数区域中寻找 "http "或 "https "的一般存在。例如，我们可以在GET请求的参数区寻找 "http "或 "https "的存在:</p>
</blockquote>
<p>allinurl:%3Dhttps*</p>
<p>allinurl:%253Dhttps*</p>
<p>allinurl:%3Dhttp*</p>
<p>allinurl:%253Dhttp*</p>
<p>We can also search for specific, common words related to forwarding within parameter area of GET request. For instance:</p>
<blockquote>
<p>我们还可以在GET请求的参数区中搜索与转发相关的特定的、常用的词。比如说:</p>
</blockquote>
<p>allinurl:"&lt;keyword&gt;=https"</p>
<p>allinurl:"&lt;keyword&gt;=http"</p>
<p>allinurl:&lt;keyword&gt;=https</p>
<p>allinurl:&lt;keyword&gt;=http</p>
<p>allinurl:&lt;keyword&gt;%3Dhttps</p>
<p>allinurl:"&lt;keyword&gt;%3Dhttps* "</p>
<p>allinurl:&lt;keyword&gt;%253Dhttps</p>
<p>allinurl:"&lt;keyword&gt;%253Dhttps* "</p>
<p>…</p>
<p>Instead of &lt;keyword&gt;, we would use one of the following words typical of redirects:RelayState, ReturnUrl, RedirectUri, Return, Return_url, Redirect, Redirect_uri, Redirect_url,RedirectUrl, Forward, ForwardUrl, Forward_URL, SuccessUrl, Redir, Exit_url, Destination. This is by no means a comprehensive list of keywords. You can find more by analyzing results from the more general queries looking for a URL in the parameter section of the GET request.</p>
<blockquote>
<p>我们将使用以下典型的重定向词来代替\keyword&gt;：RelayState，ReturnUrl，RedirectUri，Return，Return_url，Redirect，Redirect_uri，Redirect_url，RedirectUrl，Forward，ForwardUrl，Forward_URL，SuccessUrl，Redir，Exit_url，Destination。这绝不是一个全面的关键词列表。你可以通过分析GET请求的参数部分中寻找URL的更一般查询的结果来找到更多。</p>
</blockquote>
<p>For targeted searches, you can add “site:&lt;domain_name&gt;” to the end of your Google Queries. This can help you identify Open Redirect vulnerabilities on your own website.</p>
<blockquote>
<p>对于有针对性的搜索，你可以在Google查询的结尾添加 “site:&lt;domain_name&gt;”。这可以帮助你找出自己网站上的Open Redirect漏洞。</p>
</blockquote>
<p>Using this simple search technique you can find dozens of Open Redirect vulnerabilities within minutes. List of vulnerable websites includes banking websites, websites of international corporations, trusted companies, beloved projects and numerous websites of smaller organizations. As an additional bonus, each time Google’s web crawler comes across new website that has Open Redirect, we will get updated results through our queries.</p>
<blockquote>
<p>使用这种简单的搜索技术，你可以在几分钟内找到几十个Open Redirect漏洞。易受攻击的网站列表包括银行网站、国际公司网站、值得信赖的公司、心爱的项目和众多小型组织的网站。作为额外的奖励，每次Google的网络爬虫遇到有Open Redirect的新网站，我们都会通过查询得到更新的结果。</p>
</blockquote>
<p>The best way to avoid Open Redirect vulnerability is to avoid redirecting based on parameter controlled by users or supplied through GET method. If redirecting is unavoidable,it can be dealt with by validating a redirect target and sanitizing it using whitelist of approved URLs.</p>
<blockquote>
<p>避免Open Redirect漏洞的最好方法是避免基于用户控制的参数或通过GET方法提供的重定向。如果重定向是不可避免的，可以通过验证重定向目标，并使用批准的URL白名单对其进行消毒处理。</p>
</blockquote>
<link rel="stylesheet" href="/css/markmap.css" type="text/css"><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
  </div>
</article>

    </div>
    <footer class="footer-nav">
      <div class="footer">
        <div class="back-top" id="back-top" title="Back to top">
          <i class="icon icon-chevron-bar-up"></i>
        </div>
        <span class="footer-msg">
  
    <div class="icp">
      <img src="/img/icp.png" alt="icp Record">
      <a href="https://beian.miit.gov.cn/" class="icp-text" target="_blank">
        京ICP备2021005293号
      </a>
    </div>
  

  

  
  

    <div>
      <span id="busuanzi_container_site_pv">
        <span id="busuanzi_value_site_pv">?</span> PV
      </span>
      <span id="busuanzi_container_site_uv">
        <span id="busuanzi_value_site_uv">?</span> UV
      </span>
    </div>

  



  Copyright &copy;
  2019
  
  
    <span class="timeDivide">-</span>
    2023
  
  唯獨少了個字.
  Power by
  <a href="https://hexo.io/" target="_blank" rel="external nofollow">Hexo</a>
  and
  <a href="https://github.com/Cerallin/hexo-theme-yuzu"
      target="_blank" rel="external nofollow" title="v2.4">
    Theme Yuzu</a>.
</span>

      </div>
    </footer>
    


<script src="/js/clipboard/clipboard.min.js"></script>


<script src="/js/theme.js"></script>


<script src="/js/index.js"></script>



  
  <script>
      expend = "Expand";
      collapse = "Collapse";
  </script>
  
  
<script src="/js/toc.js"></script>





  </div>
</body>
